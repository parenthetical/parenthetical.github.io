<!DOCTYPE html>
<html lang="en">
  	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="generator" content="Hugo 0.136.5">
		<title>2024-03-18 - Adriaan Leijnse</title>

		<meta name="description" content="I&rsquo;m working on my FRP library today.
I think I have GC working cleanly, no test failures and the root event gets completely unsubscribed from after enough performGC&rsquo;s.
Also, I still need to add:

 Weak reference for the Behavior invalidators (currently that&rsquo;s a plain value so it might keep an event alive that&rsquo;s dead?)
 Weak reference for lazily sampled behavior values, although they are currently forced on each frame so it would only affect GC within a frame.

Everything seems to work so far, except that running the test cases many times from GHCi lead to an exception due to an uninitialized reference, that points to some subtle fault in my GC code I think.
Maybe I need to add some touch&rsquo;s like in Reflex&rsquo; code.">


		
	
		




<link rel="stylesheet" href="/css/ui.css">

	
		

		<link  rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono|Lato|Raleway">

		
	</head>

  <body>
    <header class="container no-print">
      <nav id="navbar"
           style="
                  margin-bottom: 3rem;
                  padding-top: 1rem;
                  display: flex;
                  flex-wrap: wrap;
                  align-items: flex-end;
                  column-gap: 1.7rem;
                  "             >
        <a href="/"
           >
          <h1 style="
                     margin: 0.2rem 0;
                     padding: 0;
                     font-size: 1.6rem;
                     font-family: roman;
                     color: #777;
                     ">
            Adriaan Leijnse
          </h1>
        </a>
        <ul>
          <li>
            <a href="/blog/"
               
               >
              Blog
            </a>
          </li><li>
            <a href="/foc-ideas/"
               
               >
              Future of Coding
            </a>
          </li><li>
            <a href="/journal/"
               
               class="active"
               
               >
              Journal
            </a>
          </li><li>
            <a href="/papers/"
               
               >
              Papers
            </a>
          </li></ul>
      </nav>
    </header>
    <main class="container">

<article>
  <header>
    <hgroup id="brand">
      <h1>
        Journal entry for 
	
        
	<time datetime="2024-03-18 00:00:00 &#43;0000 UTC">March 18, 2024</time>
        
	<span class="no-print">
	  <span>
      </h1>
    </hgroup>
    <hr class="sep" />
  </header>
  <p>I&rsquo;m working on my FRP library today.
I think I have GC working cleanly, no test failures and the root event gets completely unsubscribed from after enough <code>performGC</code>&rsquo;s.</p>
<p>Also, I still need to add:</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> Weak reference for the Behavior invalidators (currently that&rsquo;s a plain value so it might keep an event alive that&rsquo;s dead?)</li>
<li><input disabled="" type="checkbox"> Weak reference for lazily sampled behavior values, although they are currently forced on each frame so it would only affect GC within a frame.</li>
</ul>
<p>Everything seems to work so far, except that running the test cases many times from GHCi lead to an exception due to an uninitialized reference, that points to some subtle fault in my GC code I think.
Maybe I need to add some <code>touch</code>&rsquo;s like in Reflex&rsquo; code.</p>

</article>
<nav class="no-print post-nav">
  
  <a class="prev-post" href="https://aidy.dev/journal/2024-03-04/">
    <img class="icon-text" src="/img/prev.svg"/>2024-03-04</a>
  
  
</nav>





		        <hr class="bottom-sep" />
		</main>
		<footer class="container no-print">
			<div class="u-footer">
				
<a href="https://github.com/parenthetical"><img class="icon-zocial" src="/img/github.svg" alt="Github"/></a>
<a href="https://twitter.com/aidylns"><img class="icon-zocial" src="/img/twitter.svg" alt="Twitter"/></a>

			</div>
		</footer>
		
   </body>
<script type="text/javascript"
  src="/tex-mml-chtml.js">
</script>
</html>

